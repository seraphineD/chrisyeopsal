const _0x507e25=_0x3e4a;(function(_0xb5d543,_0x2c4be2){const _0x21ebba=_0x3e4a,_0x16ee22=_0xb5d543();while(!![]){try{const _0x3f4258=-parseInt(_0x21ebba(0x1d2))/0x1*(-parseInt(_0x21ebba(0x1ca))/0x2)+parseInt(_0x21ebba(0x1d9))/0x3+-parseInt(_0x21ebba(0x1d8))/0x4*(-parseInt(_0x21ebba(0x1d5))/0x5)+parseInt(_0x21ebba(0x1d0))/0x6+parseInt(_0x21ebba(0x1c7))/0x7*(parseInt(_0x21ebba(0x1e3))/0x8)+-parseInt(_0x21ebba(0x1c5))/0x9*(parseInt(_0x21ebba(0x1d3))/0xa)+-parseInt(_0x21ebba(0x1c6))/0xb;if(_0x3f4258===_0x2c4be2)break;else _0x16ee22['push'](_0x16ee22['shift']());}catch(_0x10c2ea){_0x16ee22['push'](_0x16ee22['shift']());}}}(_0x5afb,0xba9b9));import _0xb78589 from'express';import _0x824e83 from'node-fetch';import _0x378916 from'path';import{fileURLToPath}from'url';function _0x3e4a(_0x30f017,_0x1e2057){_0x30f017=_0x30f017-0x1c4;const _0x5afbee=_0x5afb();let _0x3e4ad6=_0x5afbee[_0x30f017];return _0x3e4ad6;}import'dotenv/config';const __filename=fileURLToPath(import.meta.url),__dirname=_0x378916[_0x507e25(0x1d7)](__filename),app=_0xb78589();app['use'](_0xb78589['static'](_0x378916[_0x507e25(0x1ea)](__dirname,_0x507e25(0x1dd))));let accessToken=process['env'][_0x507e25(0x1db)];const refreshToken=process[_0x507e25(0x1cf)][_0x507e25(0x1c9)],clientId=process['env'][_0x507e25(0x1e5)],clientSecret=process['env'][_0x507e25(0x1d4)];async function refreshAccessToken(){const _0x3bd3c3=_0x507e25,_0x517edf=new URLSearchParams();_0x517edf[_0x3bd3c3(0x1ce)](_0x3bd3c3(0x1c4),_0x3bd3c3(0x1e7)),_0x517edf[_0x3bd3c3(0x1ce)]('refresh_token',refreshToken);const _0x152d3c=await _0x824e83(_0x3bd3c3(0x1e1),{'method':_0x3bd3c3(0x1e4),'headers':{'Authorization':_0x3bd3c3(0x1cc)+Buffer[_0x3bd3c3(0x1cb)](clientId+':'+clientSecret)[_0x3bd3c3(0x1e9)](_0x3bd3c3(0x1c8)),'Content-Type':_0x3bd3c3(0x1eb)},'body':_0x517edf}),_0x5add9d=await _0x152d3c[_0x3bd3c3(0x1de)]();accessToken=_0x5add9d[_0x3bd3c3(0x1d6)];}app[_0x507e25(0x1cd)]('/now-playing',async(_0x5402a4,_0x5986c9)=>{const _0xfb8320=_0x507e25;try{const _0x30bac7=await _0x824e83('https://api.spotify.com/v1/me/player/currently-playing',{'headers':{'Authorization':_0xfb8320(0x1da)+accessToken}});if(_0x30bac7[_0xfb8320(0x1e6)]===0xcc)return _0x5986c9[_0xfb8320(0x1de)]({'is_playing':![]});if(_0x30bac7[_0xfb8320(0x1e6)]===0x191)return await refreshAccessToken(),_0x5986c9[_0xfb8320(0x1dc)](_0xfb8320(0x1e2));const _0x219b22=await _0x30bac7[_0xfb8320(0x1de)]();_0x5986c9['json'](_0x219b22);}catch(_0x4f36c6){_0x5986c9[_0xfb8320(0x1e6)](0x1f4)['json']({'error':'Failed\x20to\x20fetch\x20Spotify\x20data'});}});const PORT=process[_0x507e25(0x1cf)][_0x507e25(0x1df)]||0xbb8;function _0x5afb(){const _0x54c9d5=['704301cTuNIl','Bearer\x20','SPOTIFY_ACCESS_TOKEN','redirect','public','json','PORT','Server\x20running\x20on\x20port\x20','https://accounts.spotify.com/api/token','/now-playing','1096eQeRPd','POST','SPOTIFY_CLIENT_ID','status','refresh_token','log','toString','join','application/x-www-form-urlencoded','grant_type','747OgywHA','23100264GhvzDq','4011SHjdSA','base64','SPOTIFY_REFRESH_TOKEN','950PsYVhf','from','Basic\x20','get','append','env','7823790scscER','listen','2751mEQSJE','10750jwKmtE','SPOTIFY_CLIENT_SECRET','1195SjHrxz','access_token','dirname','496wlMqTE'];_0x5afb=function(){return _0x54c9d5;};return _0x5afb();}app[_0x507e25(0x1d1)](PORT,()=>console[_0x507e25(0x1e8)](_0x507e25(0x1e0)+PORT));